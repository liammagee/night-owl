/* Theme and color variables */

:root {
    /* Light mode colors */
    --bg-color: #ffffff;
    --bg-secondary: #f8fafc;
    --bg-tertiary: #f1f5f9;
    --text-color: #1e293b;
    --text-secondary: #475569;
    --text-muted: #94a3b8;
    --border-color: #e2e8f0;
    --border-strong: #cbd5e1;
    --hover-color: #f1f5f9;
    --active-color: #e2e8f0;

    /* Surfaces */
    --surface: #ffffff;
    --surface-variant: #f8fafc;
    --surface-hover: #f1f5f9;
    --surface-active: #e2e8f0;

    /* Primary accent */
    --primary: #6366f1;
    --primary-hover: #4f46e5;
    --primary-light: #e0e7ff;
    --text-on-primary: #ffffff;

    /* App backgrounds */
    --app-bg: #f1f5f9;
    --panel-bg: #ffffff;
    --card-bg: #ffffff;
    --card-border: #e2e8f0;
    --card-header-bg: #f8fafc;

    /* Preview pane - light warm background */
    --preview-bg: #fefdfb;
    --preview-text: #1e293b;

    /* Toolbar and menu */
    --toolbar-bg: #f8fafc;
    --toolbar-border: #e2e8f0;
    --menu-bg: #ffffff;
    --menu-text-color: #1e293b;
    --menu-content-bg: #ffffff;
    --menu-header-bg: rgba(0, 0, 0, 0.05);
    --menu-header-hover-bg: rgba(0, 0, 0, 0.1);

    /* Buttons */
    --button-bg: #f1f5f9;
    --button-border: #e2e8f0;
    --button-text: #475569;
    --button-hover-bg: #e2e8f0;
    --button-muted-bg: rgba(0, 0, 0, 0.05);
    --button-muted-border: rgba(0, 0, 0, 0.1);
    --button-muted-text: #475569;

    /* Input fields */
    --input-bg: #ffffff;
    --input-border: #e2e8f0;
    --input-focus-border: #6366f1;

    /* Code blocks */
    --code-bg: #f8fafc;
    --code-text: #1e293b;

    /* Scrollbar */
    --scrollbar-track: #f1f5f9;
    --scrollbar-thumb: #cbd5e1;
    --scrollbar-thumb-hover: #94a3b8;

    /* Shadows */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}

/* Dark mode - sleek, modern, consistent */
body.dark-mode {
    /* Core colors - match Monaco vs-dark #1e1e1e for consistency */
    --bg-color: #1e1e1e;
    --bg-secondary: #252526;
    --bg-tertiary: #333333;
    --text-color: #d4d4d4;
    --text-secondary: #9d9d9d;
    --text-muted: #6b6b6b;
    --border-color: #3c3c3c;
    --border-strong: #4a4a4a;
    --hover-color: #2a2a2a;
    --active-color: #3c3c3c;

    /* Surfaces - match VS Code */
    --surface: #252526;
    --surface-variant: #1e1e1e;
    --surface-hover: #2a2d2e;
    --surface-active: #37373d;

    /* Primary accent - Indigo for dark mode */
    --primary: #818cf8;
    --primary-hover: #6366f1;
    --primary-light: rgba(129, 140, 248, 0.15);
    --text-on-primary: #18181b;

    /* App backgrounds - match VS Code dark theme */
    --app-bg: #181818;
    --panel-bg: #1e1e1e;
    --card-bg: #252526;
    --card-border: #3c3c3c;
    --card-header-bg: #252526;

    /* Preview pane - match Monaco editor background exactly */
    --preview-bg: #252526;
    --preview-text: var(--text-color);

    /* Toolbar and menu - match VS Code dark theme */
    --toolbar-bg: #252526;
    --toolbar-border: #3c3c3c;
    --menu-bg: #252526;
    --menu-text-color: #d4d4d4;
    --menu-content-bg: #1e1e1e;
    --menu-header-bg: rgba(255, 255, 255, 0.05);
    --menu-header-hover-bg: rgba(255, 255, 255, 0.1);

    /* Buttons */
    --button-bg: #3c3c3c;
    --button-border: #4a4a4a;
    --button-text: #d4d4d4;
    --button-hover-bg: #4a4a4a;
    --button-muted-bg: rgba(255, 255, 255, 0.05);
    --button-muted-border: rgba(255, 255, 255, 0.1);
    --button-muted-text: #9d9d9d;

    /* Input fields */
    --input-bg: #3c3c3c;
    --input-border: #4a4a4a;
    --input-focus-border: #818cf8;

    /* Code blocks */
    --code-bg: #252526;
    --code-text: #d4d4d4;

    /* Scrollbar - match VS Code */
    --scrollbar-track: #1e1e1e;
    --scrollbar-thumb: #4a4a4a;
    --scrollbar-thumb-hover: #5a5a5a;

    /* Shadows - subtle for dark mode */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
}

/* =====================================================
   GLOBAL DARK MODE OVERRIDES
   ===================================================== */

/* Body and HTML */
body.dark-mode,
body.dark-mode html {
    background: var(--app-bg) !important;
    color: var(--text-color) !important;
}

/* Main content area */
body.dark-mode #main-content {
    background: var(--bg-color) !important;
}

/* =====================================================
   SIDEBAR DARK MODE
   ===================================================== */

body.dark-mode #left-sidebar {
    background: var(--panel-bg) !important;
    border-color: var(--border-color) !important;
}

body.dark-mode #left-sidebar .pane-toggle-button {
    background: var(--button-bg) !important;
    border-color: var(--button-border) !important;
    color: var(--button-text) !important;
}

body.dark-mode #left-sidebar .pane-toggle-button:hover {
    background: var(--button-hover-bg) !important;
}

body.dark-mode #left-sidebar .pane-toggle-button.active {
    background: var(--primary) !important;
    border-color: var(--primary) !important;
    color: var(--text-on-primary) !important;
}

body.dark-mode #file-tree-view,
body.dark-mode #structure-list {
    background: transparent !important;
    color: var(--text-color) !important;
}

body.dark-mode .file-tree-item {
    color: var(--text-color) !important;
}

body.dark-mode .file-tree-item:hover {
    background: var(--surface-hover) !important;
}

/* Multi-select styling for files */
.file-tree-item.file-selected {
    background: rgba(0, 122, 204, 0.15) !important;
    border-left: 3px solid #007acc !important;
    padding-left: calc(var(--padding-left, 8px) - 3px) !important;
}

.file-tree-item.file-selected:hover {
    background: rgba(0, 122, 204, 0.25) !important;
}

body.dark-mode .file-tree-item.file-selected {
    background: rgba(0, 122, 204, 0.25) !important;
    border-left: 3px solid #4fc3f7 !important;
}

body.dark-mode .file-tree-item.file-selected:hover {
    background: rgba(0, 122, 204, 0.35) !important;
}

body.dark-mode #tag-search-input {
    background: var(--input-bg) !important;
    border-color: var(--input-border) !important;
    color: var(--text-color) !important;
}

body.dark-mode #tag-search-input::placeholder {
    color: var(--text-muted) !important;
}

/* =====================================================
   MODE SWITCHER / TOP NAV DARK MODE
   ===================================================== */

body.dark-mode #mode-switcher {
    background: var(--toolbar-bg) !important;
    border-bottom-color: var(--toolbar-border) !important;
}

body.dark-mode .mode-btn {
    background: var(--button-bg) !important;
    border-color: var(--button-border) !important;
    color: var(--button-text) !important;
}

body.dark-mode .mode-btn:hover {
    background: var(--button-hover-bg) !important;
}

body.dark-mode .mode-btn.active {
    background: var(--primary) !important;
    border-color: var(--primary) !important;
    color: var(--text-on-primary) !important;
}

body.dark-mode .nav-btn {
    background: var(--button-bg) !important;
    border-color: var(--button-border) !important;
    color: var(--button-text) !important;
}

body.dark-mode .nav-btn:hover {
    background: var(--button-hover-bg) !important;
}

body.dark-mode #current-file-name {
    color: var(--text-secondary) !important;
}

/* =====================================================
   EDITOR TOOLBAR DARK MODE
   ===================================================== */

body.dark-mode #editor-toolbar {
    background: var(--toolbar-bg) !important;
    border-bottom-color: var(--toolbar-border) !important;
}

body.dark-mode .toolbar-btn,
body.dark-mode .toolbar-button {
    background: var(--button-bg) !important;
    border-color: var(--button-border) !important;
    color: var(--button-text) !important;
}

body.dark-mode .toolbar-btn:hover,
body.dark-mode .toolbar-button:hover {
    background: var(--button-hover-bg) !important;
    border-color: var(--border-strong) !important;
}

body.dark-mode .toolbar-btn.active,
body.dark-mode .toolbar-button.active {
    background: var(--primary) !important;
    border-color: var(--primary) !important;
    color: var(--text-on-primary) !important;
}

body.dark-mode .toolbar-separator {
    background: var(--border-color) !important;
}

/* =====================================================
   PREVIEW PANE DARK MODE
   ===================================================== */

body.dark-mode #right-pane {
    background: var(--preview-bg) !important;
}

body.dark-mode #right-pane > div,
body.dark-mode #right-pane > div > div {
    background: var(--preview-bg) !important;
}

/* Ensure all nested divs in preview have consistent background */
body.dark-mode #right-pane div:not(code):not(pre):not(.hljs) {
    background-color: var(--preview-bg) !important;
}

body.dark-mode #preview-pane {
    background: var(--preview-bg) !important;
}

body.dark-mode #preview-content {
    background: var(--preview-bg) !important;
    color: var(--preview-text) !important;
}

body.dark-mode .content-pane {
    background: var(--preview-bg) !important;
    color: var(--preview-text) !important;
}

/* Preview content typography */
body.dark-mode #preview-content h1,
body.dark-mode #preview-content h2,
body.dark-mode #preview-content h3,
body.dark-mode #preview-content h4,
body.dark-mode #preview-content h5,
body.dark-mode #preview-content h6 {
    color: var(--text-color) !important;
}

body.dark-mode #preview-content a {
    color: var(--primary) !important;
}

body.dark-mode #preview-content a:hover {
    color: var(--primary-hover) !important;
}

body.dark-mode #preview-content code {
    background: var(--code-bg) !important;
    color: var(--code-text) !important;
}

body.dark-mode #preview-content pre {
    background: var(--code-bg) !important;
    border-color: var(--border-color) !important;
}

body.dark-mode #preview-content pre code {
    background: transparent !important;
}

body.dark-mode #preview-content blockquote {
    border-left-color: var(--primary) !important;
    background: var(--primary-light) !important;
    color: var(--text-secondary) !important;
}

body.dark-mode #preview-content table {
    border-color: var(--border-color) !important;
}

body.dark-mode #preview-content th {
    background: var(--surface) !important;
    border-color: var(--border-color) !important;
    color: var(--text-color) !important;
}

body.dark-mode #preview-content td {
    border-color: var(--border-color) !important;
    color: var(--text-color) !important;
}

body.dark-mode #preview-content tr:nth-child(even) {
    background: var(--surface-hover) !important;
}

body.dark-mode #preview-content hr {
    border-color: var(--border-color) !important;
}

/* =====================================================
   CHAT PANE DARK MODE
   ===================================================== */

body.dark-mode #chat-pane {
    background: var(--panel-bg) !important;
    color: var(--text-color) !important;
}

body.dark-mode .chat-input-area,
body.dark-mode #chat-input {
    background: var(--input-bg) !important;
    border-color: var(--input-border) !important;
    color: var(--text-color) !important;
}

body.dark-mode #chat-messages {
    background: var(--panel-bg) !important;
}

body.dark-mode .terminal-header {
    background: var(--surface) !important;
    border-color: var(--border-color) !important;
}

body.dark-mode .terminal-subtitle {
    color: var(--text-secondary) !important;
}

/* =====================================================
   RESIZER DARK MODE
   ===================================================== */

body.dark-mode .resizer {
    background: var(--border-color) !important;
}

body.dark-mode .resizer:hover {
    background: var(--primary) !important;
}

/* =====================================================
   BOTTOM TAB BAR DARK MODE
   ===================================================== */

body.dark-mode .bottom-tabs,
body.dark-mode .toggle-buttons {
    background: var(--panel-bg) !important;
    border-top-color: var(--border-color) !important;
}

body.dark-mode .bottom-tabs .tab-btn,
body.dark-mode .toggle-btn {
    background: var(--button-bg) !important;
    border-color: var(--button-border) !important;
    color: var(--button-text) !important;
}

body.dark-mode .bottom-tabs .tab-btn:hover,
body.dark-mode .toggle-btn:hover {
    background: var(--button-hover-bg) !important;
}

body.dark-mode .bottom-tabs .tab-btn.active,
body.dark-mode .toggle-btn.active {
    background: var(--primary) !important;
    border-color: var(--primary) !important;
    color: var(--text-on-primary) !important;
}

/* =====================================================
   MODAL / DIALOG DARK MODE
   ===================================================== */

body.dark-mode .modal-dialog,
body.dark-mode .modal-content {
    background: var(--card-bg) !important;
    border-color: var(--card-border) !important;
}

body.dark-mode .modal-header {
    background: var(--surface) !important;
    border-bottom-color: var(--border-color) !important;
}

body.dark-mode .modal-header h3,
body.dark-mode .modal-title {
    color: var(--text-color) !important;
}

body.dark-mode .modal-close {
    color: var(--text-secondary) !important;
}

body.dark-mode .modal-close:hover {
    background: var(--surface-hover) !important;
    color: var(--text-color) !important;
}

body.dark-mode .modal-body {
    background: var(--card-bg) !important;
    color: var(--text-color) !important;
}

body.dark-mode .modal-footer {
    background: var(--surface) !important;
    border-top-color: var(--border-color) !important;
}

/* Settings dialog */
body.dark-mode #settings-dialog {
    background: var(--card-bg) !important;
}

body.dark-mode .settings-nav {
    background: var(--panel-bg) !important;
    border-right-color: var(--border-color) !important;
}

body.dark-mode .settings-nav-item {
    color: var(--text-color) !important;
}

body.dark-mode .settings-nav-item:hover {
    background: var(--surface-hover) !important;
}

body.dark-mode .settings-nav-item.active {
    background: var(--primary-light) !important;
    color: var(--primary) !important;
}

body.dark-mode .settings-content {
    background: var(--card-bg) !important;
}

body.dark-mode .settings-section h4 {
    color: var(--text-color) !important;
    border-bottom-color: var(--border-color) !important;
}

body.dark-mode .settings-label {
    color: var(--text-color) !important;
}

body.dark-mode .settings-input,
body.dark-mode .settings-select {
    background: var(--input-bg) !important;
    border-color: var(--input-border) !important;
    color: var(--text-color) !important;
}

/* =====================================================
   COMMAND PALETTE DARK MODE
   ===================================================== */

body.dark-mode .command-palette-overlay {
    background: rgba(0, 0, 0, 0.7) !important;
}

body.dark-mode .command-palette {
    background: var(--card-bg) !important;
    border-color: var(--card-border) !important;
}

body.dark-mode .command-palette-input {
    background: var(--input-bg) !important;
    border-color: var(--input-border) !important;
    color: var(--text-color) !important;
}

body.dark-mode .command-palette-input::placeholder {
    color: var(--text-muted) !important;
}

body.dark-mode .command-item {
    color: var(--text-color) !important;
}

body.dark-mode .command-item:hover,
body.dark-mode .command-item.selected {
    background: var(--surface-hover) !important;
}

body.dark-mode .command-item-shortcut {
    color: var(--text-muted) !important;
    background: var(--surface) !important;
}

/* =====================================================
   SCROLLBAR DARK MODE
   ===================================================== */

body.dark-mode ::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

body.dark-mode ::-webkit-scrollbar-track {
    background: var(--scrollbar-track) !important;
}

body.dark-mode ::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb) !important;
    border-radius: 5px;
}

body.dark-mode ::-webkit-scrollbar-thumb:hover {
    background: var(--scrollbar-thumb-hover) !important;
}

/* =====================================================
   PANE VISIBILITY BUTTONS DARK MODE
   ===================================================== */

body.dark-mode .pane-visibility-btn {
    background: var(--button-bg) !important;
    border-color: var(--button-border) !important;
    color: var(--button-text) !important;
}

body.dark-mode .pane-visibility-btn:hover {
    background: var(--button-hover-bg) !important;
}

body.dark-mode .pane-visibility-btn.toggle-off {
    background: var(--surface) !important;
    color: var(--text-muted) !important;
    opacity: 0.7;
}

/* =====================================================
   FULLSCREEN BUTTON DARK MODE
   ===================================================== */

body.dark-mode .preview-fullscreen-toggle {
    background: var(--button-bg) !important;
    border-color: var(--button-border) !important;
    color: var(--button-text) !important;
}

body.dark-mode .preview-fullscreen-toggle:hover {
    background: var(--button-hover-bg) !important;
}

/* =====================================================
   FORM ELEMENTS DARK MODE
   ===================================================== */

body.dark-mode input[type="text"],
body.dark-mode input[type="password"],
body.dark-mode input[type="email"],
body.dark-mode input[type="number"],
body.dark-mode input[type="search"],
body.dark-mode textarea,
body.dark-mode select {
    background: var(--input-bg) !important;
    border-color: var(--input-border) !important;
    color: var(--text-color) !important;
}

body.dark-mode input::placeholder,
body.dark-mode textarea::placeholder {
    color: var(--text-muted) !important;
}

body.dark-mode input:focus,
body.dark-mode textarea:focus,
body.dark-mode select:focus {
    border-color: var(--input-focus-border) !important;
    outline: none;
}

/* Checkbox and toggle switches */
body.dark-mode input[type="checkbox"] {
    accent-color: var(--primary);
}

/* =====================================================
   PLUGIN ROW DARK MODE
   ===================================================== */

body.dark-mode .plugin-row {
    background: var(--surface) !important;
    border-color: var(--border-color) !important;
}

body.dark-mode .plugin-row:hover {
    background: var(--surface-hover) !important;
}

body.dark-mode .plugin-name {
    color: var(--text-color) !important;
}

body.dark-mode .plugin-description {
    color: var(--text-secondary) !important;
}

/* =====================================================
   KEYBOARD SHORTCUTS DIALOG DARK MODE
   ===================================================== */

body.dark-mode .shortcuts-section h4 {
    color: var(--text-color) !important;
    border-bottom-color: var(--border-color) !important;
}

body.dark-mode .shortcut-description {
    color: var(--text-secondary) !important;
}

body.dark-mode .shortcut-key {
    background: var(--surface) !important;
    border-color: var(--border-color) !important;
    color: var(--text-color) !important;
}

/* =====================================================
   STATUS BAR DARK MODE
   ===================================================== */

body.dark-mode #status-bar,
body.dark-mode .status-bar {
    background: var(--panel-bg) !important;
    border-top-color: var(--border-color) !important;
    color: var(--text-secondary) !important;
}
